# Design Pattern - MVVM

## 디자인 패턴?

`디자인 패턴(Design pattern)`은 건축학 및 컴퓨터 과학에서 사용되는 용어로, 설계 문제에 대한 해답을 문서화하기위해 고안된 형식 방법이다. 이 방식은 건축가 크리스토퍼 알렉산더가 건축학 영역에서 고안한 것을 그 시초로 하며, 이후 컴퓨터 과학 등 여러 다른 분야에도 도입되었다.

소프트웨어 개발 방법에서 사용되는 디자인 패턴은 프로그램 개발에서 자주 나타나는 과제를 해결하기 위한 방법 중 하나로, 과거의 소프트웨어 개발 과정에서 발견된 설계의 노하우를 축적하여 이름을 붙여, 이후에 재이용하기 좋은 형태로 특정의 규약을 묶어서 정리한 것이다. 알고리즘과 같이 프로그램 코드로 바로 변환될 수 있는 형태는 아니지만, 특정한 상황에서 구조적인 문제를 해결하는 방식을 설명해 준다.

- 출처 : https://ko.wikipedia.org/wiki/%EB%94%94%EC%9E%90%EC%9D%B8_%ED%8C%A8%ED%84%B4

<br/>

## MVVM

`MVVM` 패턴은 마틴 파울러의 Presentation 모델 패턴에서 파생된 디자인 패턴이다. `MVVM` 패턴의 목표는 비즈니스 로직과 프레젠테이션 로직을 UI로부터 분리하는 것이다. 비즈니스 로직과 프레젠테이션 로직을 UI로부터 분리하게 되면, 테스트, 유지 보수, 재사용이 쉬워진다.

`MVVM` 의 뷰 모델은 값 변환기인데, 이는 뷰 모델이 모델에 있는 데이터 객체를 노출(변환)하는 책임을 지기 때문에 객체를 관리하고 표현하기가 쉬워진다는 것을 의미한다. 이러한 점에서, 뷰 모델은 뷰 보다는 더 모델인 것이며, 모든 뷰들의 디스플레이 로직을 제외한 대부분의 것들을 처리한다. 뷰 모델은 '백-엔드 로직에 대한 접근'과 그 주변부의 '뷰에서 지원하는 유즈 케이스 집합'으로 구성되도록, 중재자 패턴으로 구현할 수도 있다.

<br/>

## MVVM 구성요소

- Model

  - 모델은 비지니스 로직과 유효성 검사와 데이터를 포함하는 앱의 도메인 모델이다.

  - 데이터를 가지고 있는 클래스이다. (메모리, 로컬, 서버 등)

  - 앱에서 사용할 데이터와 관련된 행위와 데이터를 다룬다.

<br/>

- View

  - UI에 대한 처리를 한다.

  - 사용자가 보는 것들에 대한 구조, 레이아웃, 형태를 정의한다.

  - 뷰는 애니메이션과 같은 UI 로직을 포함하지만 비지니스 로직을 포함하면 안된다.

  - 뷰의 상호 작용(클릭, 키보드, 동작 등)을 수신하여, 이에 대한 처리를 뷰와 뷰 모델의 연결을 정의하고 있는 (속성, 이벤트 콜백 함수 등의) 데이터 바인딩(data binding, 데이터 연결)을 통하여 뷰 모델로 전달한다.

<br/>

- View Model

  - 뷰모델은 뷰를 그리는데 필요한 모델이다.
  - 뷰에 연결할 데이터와 명령으로 구성되어 있고 변경 알림을 통해서 뷰에게 상태 변화를 전달한다. (뷰 모델은 화면이 그려지는 방법을 모른다.)

뷰 모델은 3가지의 구성요소가 있다.

- ViewState(뷰의 상태)
- Value Converter(상태의 조합)
- Command(뷰의 행동)

### ViewState

`ViewState` 는 화면이 가지는 본질적인 데이터이다.

뷰 모델에서 `ViewState` 는 뷰에 의해 입력받기도 하고 `ViewState` 에 따라서 뷰를 그려주기도 한다.

<br/>

### Value Converter

`ValueConverter` 는 본질적인 데이터들을 가지고 만들어 내는 작업이다. `ViewState` 로 작성해야하는지 `ValueConverter` 로 작성해야하는지 고민해야 한다. `ViewState` 가 적을수록 가독성이 높아지고 모듈화 하기 쉬워지기 때문이다.

<br/>

### Command

뷰는 사용자에게 정보를 알려주는 역할이기도 하면서 사용자로부터 이벤트를 받아들이는 역할도 한다. 뷰모델은 이러한 이벤트에 대한 처리도 해줄 수 있어야 한다. 이 처리를 `Command` 가 한다.

Command 는 하상 ViewState 를 활용해 ViewState 를 변경하거나 신호를 내보내는 역할을 한다. 따라서 뷰 모델이 노출한 뷰의 행동은 직접적으로 뷰를 참조하지 않아도 된다.

<br/>

<p align="center">

<img src="https://github.com/KCSGround/TIL/blob/master/assets/MVVM-Pattern.PNG" width="800px" height="260px"/>

</p>

<br/>

---

참고 문서

- https://yoon-dailylife.tistory.com/75
- https://salix97.tistory.com/266
- https://beomseok95.tistory.com/131
- https://gyuwon.github.io/blog/2019/12/15/what-is-model-in-mvw.html
- https://velog.io/@k7120792/Model-View-ViewModel-Pattern
- https://ko.wikipedia.org/wiki/%EB%AA%A8%EB%8D%B8-%EB%B7%B0-%EB%B7%B0%EB%AA%A8%EB%8D%B8
