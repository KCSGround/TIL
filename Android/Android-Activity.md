# Activity

## 소개

`Activity` 클래스는 Android 앱의 중요한 구성요소로 액티비티가 실행되고 결합되는 방식은 플랫폼 애플리케이션 모델의
기본요소이다. main() 메서드를 사용해서 앱을 실행하는 프로그래밍 패러다임과 달리 Android 시스템은 `수명 주기` 의 특정 단계에 해당하는 특정 콜백 메서드를 호출하여 `Activity` 인스턴스의 코드를 시작한다.

<br/>

## 개념

한 앱이 다른 앱을 호출할 때 호출 앱은 다른 앱을 전체적으로 호출하는 것이 아니라 다른 앱의 활동을 호출한다. 이런 방식으로 활동은 앱과 사용자의 상호작용을 위한 진입점 역할을 한다. 활동은 `Activity` 클래스의 서브클래스로 구현된다.

액티비티는 앱이 UI를 그리는 창을 제공한다. 이 창은 일반적으로 화면을 채우지만 화면보다 작고 다른 창 위에 떠 있을 수 있다. 일반적으로 한 액티비티는 앱에서 하나의 화면을 구현한다. 예를 들어 앱의 활동 중 하나는 환경설정 화면을 구현하고 또 다른 액티비티는 사진 선택 화면을 구현할 수 있다.

각 액티비티는 다양한 액티비티를 실행하기 위해 또 다른 액티비티 시작할 수 있다.

앱의 액티비티을 사용하려면 앱의 manifest에 활동 관련 정보를 등록하고 액티비티 수명 주기를 적절히 관리해야 한다.

<br/>

## manifest 구성

manifest에 액티비티 및 관련된 특정 속성을 선언해야 앱에서 액티비티를 사용할 수 있다.

### 활동 선언

활동을 선언하려면 manifest 파일을 열고 `<activity>` 요소를 `<application>` 요소의 하위 요소로 추가해야 한다.

```xml
<manifest ... >
      <application ... >
          <activity android:name=".ExampleActivity" />
          ...
      </application ... >
      ...
    </manifest >
```

<br/>

### 인텐트 필터 선언

인텐트 필터는 Android 플랫폼의 매우 강력한 기능이다. 인텐트 필터는 명시적 요청뿐만 아니라 암시적 요청을 기반으로도 액티비티를 실행하는 기능을 제공한다.

시스템 UI에서 사용자에게 작업을 실행할 때 어떤 앱을 사용할지 묻는 메시지가 표시되면 바로 인텐트 필터가 작동한 것이다.

`<activity>` 요소에서 `<intent-filter>` 속성을 선언함으로써 이 기능을 활용할 수 있다. 이 요소의 정의에는 `<action>` 요소와 선택적으로 `<category>` 요소 또는 `<data>` 요소가 포함된다.

<br/>

### 권한 선언

manifest의 `<activity>` 태그를 사용하여 특정 활동을 시작할 수 있는 앱을 제어할 수 있다. 상위 활동과 하위 활동이 모두 각 manifest에서 동일한 권한을 가지고 있지 않다면 상위 활동이 하위 활동을 실행할 수 없다. 상위 활동에서 `<uses-permission>` 요소를 선언할 때에는 각 하위 활동에 일치하는 `<uses-permission>` 요소가 있어야 한다.

예를 들어서 인터넷이 연결되어 있어야하는 활동이나 내부 데이터베이스를 조회하는 활동을 할 때는 반드시 uses-permission 를 통해서 해당 권한에 대한 명시가 필요하다.

<br/>

### 활동 수명 주기 관리

#### onCreate()

시스템이 활동을 생성할 때 실행되는 이 콜백을 구현해야 한다. 구현 시 활동의 필수 구성요소를 초기화해야 한다. 예를 들어 앱은 여기에서 뷰를 생성하고 데이터를 목록에 결합해야 한다. 이 콜백에서 setContentView()를 호출하여 활동의 사용자 인터페이스를 위한 레이아웃을 정의해야 하며 이 작업이 가장 중요하다.

<br/>

#### onResume()

활동이 사용자와 상호작용을 시작하기 직전에 시스템은 이 콜백을 호출한다. 이 시점에서 활동은 활동 스택의 맨 위에 있으며 모든 사용자 입력을 캡처한다. 앱의 핵심 기능은 대부분 `onResume()` 메서드로 구현된다.

`onPause()` 콜백은 항상 `onResume()` 뒤에 온다.

<br/>

#### onPause()

활동이 포커스를 잃고 '일시중지됨' 상태로 전환될 때 시스템은 `onPause()`를 호출한다. 예를 들어 이 상태는 사용자가 뒤로 또는 최근 버튼을 탭할 때 발생한다. 시스템이 활동에서 `onPause()`를 호출할 때 이는 엄밀히 말하면 활동이 여전히 부분적으로 표시되지만 대체로 사용자가 활동을 떠나고 있으며 활동이 조만간 '중지됨' 또는 '다시 시작됨' 상태로 전환됨을 나타낸다.

사용자가 UI 업데이트를 기다리고 있다면 '일시중지됨' 상태의 활동은 계속 UI를 업데이트할 수 있다. 이러한 활동의 예에는 내비게이션 지도 화면 또는 미디어 플레이어 재생을 표시하는 활동이 포함된다. 이러한 활동이 포커스를 잃더라도 사용자는 UI가 계속 업데이트될 것으로 예상한다.

애플리케이션 또는 사용자 데이터를 저장하거나 네트워크를 호출하거나 데이터베이스 트랜잭션을 실행하는 데 `onPause()`를 사용해서는 안 된다.

`onPause()`가 실행을 완료하면 다음 콜백은 활동이 '일시중지됨' 상태로 전환된 후 발생하는 상황에 따라 `onStop()` 또는 `onResume()` 이다.

#### onStop()

활동이 사용자에게 더 이상 표시되지 않을 때 시스템은 `onStop()`을 호출한다. 이는 활동이 제거 중이거나 새 활동이 시작 중이거나 기존 활동이 '다시 시작됨' 상태로 전환 중이고 중지된 활동을 다루고 있기 때문에 발생할 수 있다. 이 모든 상황에서 중지된 활동은 더 이상 표시되지 않는다.

시스템이 호출하는 다음 콜백은 활동이 사용자와 상호작용하기 위해 다시 시작되면 `onRestart()`이며 이 활동이 완전히 종료되면 `onDestroy()` 이다.

#### onRestart()

'중지됨' 상태의 활동이 다시 시작되려고 할 때 시스템은 이 콜백을 호출한다. `onRestart()`는 활동이 중지된 시간부터 활동 상태를 복원한다.

이 콜백 뒤에 항상 `onStart()`가 온다.

#### onDestroy()

시스템은 활동이 제거되기 전에 이 콜백을 호출한다.

이 콜백은 활동이 수신하는 마지막 콜백이다. `onDestroy()`는 일반적으로 활동 또는 활동이 포함된 프로세스가 제거될 때 활동의 모든 리소스를 해제하도록 구현된다.

#### 각 생명주기는 override 하여 필요에 따라 구현이 가능하다.

---

참고문서 - [안드로이드 공식 개발자 페이지](https://developer.android.com/?hl=ko)
